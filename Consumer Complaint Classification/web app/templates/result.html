<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Skeleton application demoing Heroku and Flask integration.">
    <meta name="author" content="@gotoariel">
    <title>Consumer Complaint Prediction Application</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Bokeh JavaScript -->
    <link rel="stylesheet" href="http://cdn.pydata.org/bokeh/release/bokeh-1.1.0.min.css" type="text/css" />
    <script type="text/javascript" src="http://cdn.pydata.org/bokeh/release/bokeh-1.1.0.min.js"></script>
    <style>
        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 70%;
            }
        td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
            }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-lg-12 text-left">
            <div align="center">
                <h2>A logistic regression model has been loaded successfully.</h2>
                <h8>* For more details on how the model was trained and model statistics, please check out the
                    <a href="https://github.com/Wenbo-Git/Consumer-Complaint-Classification">source code</a></h8><br> 
              
                <h2>Predictions have been made!</h2>
                {% for output in outputs %}
                <tr>
                    <h4>{{output["complaint name"]}} is very likely to be {{ output["prediction"]}}</h4>
                    Original Complaint: {{output["complaint"]}}
                    
                    {{output["script"]|safe}}
                    {{output["div"]|safe}}
                    
                    Key words in the complaint contributed to the probabilities of products (by descending order)
                    
                    <table>
                        <tr>
                            <th>Products</th> 
                            <th>Key Words</th>
                        </tr>
                        <tr>
                            <td>Bank account or service</td>
                            <td>{{output["list of list of words"][0]}}</td>
                        </tr>
                        <tr>
                            <td>Checking or savings account</td>
                            <td>{{output["list of list of words"][1]}}</td>
                        </tr>
                        <tr>    
                            <td>Consumer Loan</td>
                            <td>{{output["list of list of words"][2]}}</td>
                        </tr>
                        <tr>
                            <td>Credit card or prepaid card</td>
                            <td>{{output["list of list of words"][3]}}</td>
                        </tr>
                        <tr>
                            <td>Credit reporting, credit repair services, or other personal consumer reports</td>
                            <td>{{output["list of list of words"][4]}}</td>
                        </tr>
                        <tr>    
                            <td>Debt collection</td>
                            <td>{{output["list of list of words"][5]}}</td>
                        </tr>
                        <tr>
                            <td>Money transfer, virtual currency, or money service</td>
                            <td>{{output["list of list of words"][6]}}</td>
                        </tr>
                        <tr>
                            <td>Money transfers</td>
                            <td>{{output["list of list of words"][7]}}</td>
                        </tr>
                        <tr>    
                            <td>Mortgage</td>
                            <td>{{output["list of list of words"][8]}}</td>
                        </tr>
                        <tr>
                            <td>Payday loan, title loan, or personal loan</td>
                            <td>{{output["list of list of words"][9]}}</td>
                        </tr>
                        <tr>
                            <td>Prepaid card</td>
                            <td>{{output["list of list of words"][10]}}</td>
                        </tr>
                        <tr>    
                            <td>Student loan</td>
                            <td>{{output["list of list of words"][11]}}</td>
                        </tr>
                        <tr>    
                            <td>Vehicle loan or lease</td>
                            <td>{{output["list of list of words"][12]}}</td>
                        </tr>
                    </table><br>
                </tr>
                {% endfor %}

                <h4>My name is Wenbo. I can be reached at:</h4>
                <a href="https://www.linkedin.com/in/wenbo-yu"><img src="/static/img/LinkedIn.png" width="30" height="30"/></a>
                <a href="https://github.com/Wenbo-Git"><img src="/static/img/GitHub.png" width="75" height="30"/></a>
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
            </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>